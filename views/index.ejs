<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css"
      integrity="sha512-2SwdPD6INVrV/lHTZbO2nodKhrnDdJK9/kg2XD1r9uGqPo1cUbujc+IYdlYdEErWNu69gVcYgdxlmVmzTWnetw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <title>SwiftBite Login</title>
  </head>
  <body>
    <%- include("partials/header.ejs") %>

    <div class="container">
      <form action="/login" method="post">
        <div class="login-section">
          <img
            src="/images/Final SwiftBite Logo.png"
            alt="SwiftBite Logo"
            class="logo"
          />
          <h2>Log in or sign up</h2>

          <div class="input-group">
            <label for="email">Email</label>
            <input
              type="email"
              name="email"
              id="email"
              placeholder="Enter your email"
            />
            <span id="tick" class="valid-tick">‚úì</span>
          </div>

          <div class="input-group">
            <label for="password">Password</label>
            <div class="input-wrapper">
              <input
                type="password"
                id="password"
                name="password"
                placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
              />
              <button type="button" id="togglePassword" class="view-toggle-btn">
                <i class="fa-sharp fa-solid fa-eye-slash"></i>
              </button>
            </div>
          </div>

          <div class="remember-me">
            <span>Remember me on this device</span>
            <label class="switch">
              <input type="checkbox" checked />
              <span class="slider"></span>
            </label>
          </div>

          <button id="continueBtn" class="continue-btn" disabled>
            Continue
          </button>
        </div>
      </form>

      <div class="feature-section">
        <div class="feature-icon">üçî</div>
        <h3>One account for all bites</h3>
        <p>
          No more managing separate accounts. You can use one account across all
          SwiftBite partners.
        </p>
      </div>
    </div>
    <script>
      const emailInput = document.getElementById("email");
      const passwordInput = document.getElementById("password");
      const togglePassword = document.getElementById("togglePassword");
      const tick = document.getElementById("tick");
      const continueBtn = document.getElementById("continueBtn");

      togglePassword.addEventListener("click", () => {
        const type =
          passwordInput.getAttribute("type") === "password"
            ? "text"
            : "password";
        passwordInput.setAttribute("type", type);

        togglePassword.textContent = type === "password" ? "Show" : "Hide";
      });

      const validateEmail = (email) => {
        return String(email)
          .toLowerCase()
          .match(
            /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,
          );
      };

      const updateUI = () => {
        const isEmailValid = validateEmail(emailInput.value);
        const hasPassword = passwordInput.value.length >= 1;

        tick.style.display = isEmailValid ? "block" : "none";

        if (isEmailValid && hasPassword) {
          continueBtn.disabled = false;
          continueBtn.classList.add("active");
        } else {
          continueBtn.disabled = true;
          continueBtn.classList.remove("active");
        }
      };

      emailInput.addEventListener("input", updateUI);
      passwordInput.addEventListener("input", updateUI);
    </script>
  </body>
</html>
